(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t){e.exports={omdbKey:"5c2e7969"}},121:function(e,t,n){e.exports=n(321)},126:function(e,t,n){},321:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(17),o=n.n(i),c=(n(126),n(23)),s=n(24),l=n(27),u=n(25),m=n(26),d=n(18),p=n(35),v=n(113),f=n(75),h=n(15),E={getRandomInt:b,makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(e){var t="";for(;t.length<e;){var n=b(3,6),a=O(n);Math.random()>.9&&(a+=","),t+=a+" "}return t=(t=t.substring(0,e))[0].toUpperCase()+t.substr(1)},getCurrency:function(e){switch(e){case"ILS":return"\u20aa";case"EUR":return"\u20ac";case"USD":return"$";default:return""}},makeColor:function(){for(var e="",t=0;t<6;t++)e+="ABCDEF0123456789".charAt(Math.floor(Math.random()*"ABCDEF0123456789".length));return e}};function b(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}function O(e){for(var t="";t.length<e;){t+=g()}return t}function g(){var e="abcdefghijklmnopqrstuvwxyz",t=parseInt(Math.random()*e.length);return e.charAt(t)}var y={movies:[],selectedMovie:{},isDeleteMsgOpen:!1,deletedMovie:{id:""},isTitleListOpen:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_MOVIES":return Object(h.a)({},e,{movies:Object(f.a)(t.movies)});case"SELECT_MOVIE":if(t.id){var n=e.movies.find(function(e){return e.id===t.id});return Object(h.a)({},e,{selectedMovie:n})}return Object(h.a)({},e,{selectedMovie:{id:E.makeId(6),title:"",year:"",director:"",runtime:"",genres:[""]}});case"UNSELECT_MOVIE":return Object(h.a)({},e,{selectedMovie:{}});case"UPDATE_MOVIE":return Object(h.a)({},e,{movies:e.movies.map(function(e){return e.id===t.updatedMovie.id?Object(h.a)({},t.updatedMovie,{Runtime:t.updatedMovie.Runtime+" min"}):e})});case"ADD_MOVIE":return Object(h.a)({},e,{movies:[].concat(Object(f.a)(e.movies),[t.addedMovie])});case"DELETE_MOVIE":return Object(h.a)({},e,{movies:e.movies.filter(function(t){return t.id!==e.deletedMovie.id})});case"CLOSE_DELETE_MSG":return Object(h.a)({},e,{isDeleteMsgOpen:!1});case"OPEN_DELETE_MSG":return Object(h.a)({},e,{isDeleteMsgOpen:!0});case"SET_DELETED_MOVIE":return Object(h.a)({},e,{deletedMovie:e.movies.find(function(e){return e.id===t.deletedMovieId})});case"OPEN_TITLE_LIST":return Object(h.a)({},e,{isTitleListOpen:!0});case"CLOSE_TITLE_LIST":return Object(h.a)({},e,{isTitleListOpen:!1});default:return e}},k=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||p.c,C=Object(p.d)(M,k(Object(p.a)(v.a))),j=n(16),T=n.n(j),w=n(29),x=n(114),I=n.n(x),L=n(115),N=n.n(L).a.omdbKey,D="https://www.omdbapi.com/?";function S(){return(S=Object(w.a)(T.a.mark(function e(){var t,n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=["the empire strikes back","fight club","the matrix","lord of the rings","logan lucky","aladin","saving private ryan"],e.next=3,Promise.all(t.map(function(){var e=Object(w.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(D,"t=").concat(t,"&apikey=").concat(N));case 2:return(n=e.sent).data=_(n.data),e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e){for(var t in e.id=e.imdbID,e.runtime=parseInt(e.Runtime),e.genres=e.Genre.split(","),e.genres=e.genres.map(function(e){return e.trim()}),e.title=F(e.Title),e.year=e.Year,e.director=e.Director,e)"id"!==t&&"title"!==t&&"year"!==t&&"runtime"!==t&&"genres"!==t&&"director"!==t&&delete e[t];return e}function F(e){return e=(e=e.toLowerCase()).replace(/[^a-zA-Z0-9 ]/g,"")}var A={query:function(){return S.apply(this,arguments)},handleTitle:F,validate:function(){var e=this,t=this.state,n=t.textFields,a=t.selectedMovie,r=a.title,i=a.id,o=this.props.movies,c=!1,s=function(e){c=!0;var t=n.findIndex(function(t){return t.name===e});n[t].error=!0},l=function(t){c=!0;var a=n.findIndex(function(e){return e.name===t});n[a].error=!0,e.setState({textFields:n})},u=function(t){switch(t){case"title":var c=n.findIndex(function(e){return e.name===t});""===a[t].replace(/[^a-zA-Z0-9 ]/g,"").trim()?(s(t),n[c].label="Invalid title.",e.setState({textFields:n})):o.find(function(e){return e.id!==i&&e.title.toLowerCase()===r.toLowerCase()})&&(s(t),n[c].label="A movie with the same title already exists.",e.setState({textFields:n}));break;case"director":""===a[t].trim()&&l(t);break;case"runtime":+a[t]<1&&l(t);break;case"year":(+a[t]<1888||+a[t]>2100)&&l(t);break;case"genres":a[t].length&&a[t][0]||l(t)}};for(var m in a)u(m);return c},textFields:[{type:"text",name:"title",placeholder:"Movie title",label:"Invalid title."},{type:"text",name:"director",placeholder:"Director",label:"Invalid director."},{type:"number",name:"runtime",placeholder:"Runtime",label:"Invalid runtime."},{type:"number",name:"year",placeholder:"Year released",label:"Invalid year."},{type:"select",name:"genres",placeholder:"Genres",label:"Please choose genres.",genres:["War","Sci-Fi","Adventure","Drama","Comedy","Romantic","Action","Fantasy"]}]},V=function(e){return{type:"LOAD_MOVIES",movies:e}},z=function(){return function(){var e=Object(w.a)(T.a.mark(function e(t){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.query();case 2:return n=e.sent,t(V(n)),e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},P=function(e){return e.title=A.handleTitle(e.title),{type:"ADD_MOVIE",addedMovie:e}},U=function(e){return e.title=A.handleTitle(e.title),{type:"UPDATE_MOVIE",updatedMovie:e}},R=function(e){return{type:"SELECT_MOVIE",id:e}},W=function(){return{type:"UNSELECT_MOVIE"}},G=function(){return{type:"DELETE_MOVIE"}},B=function(){return{type:"CLOSE_DELETE_MSG"}},Y=function(){return{type:"OPEN_DELETE_MSG"}},q=function(e){return{type:"SET_DELETED_MOVIE",deletedMovieId:e}},K=function(){return{type:"OPEN_TITLE_LIST"}},J=function(){return{type:"CLOSE_TITLE_LIST"}},X=n(116),Z=n.n(X),H=n(22),$=n.n(H);var Q=Object(d.b)(function(e){return{isDeleteMsgOpen:e.isDeleteMsgOpen,deletedMovie:e.deletedMovie}},function(e){return{handleClose:function(){e(B())},handleYes:function(){e(G()),e(B())}}})(function(e){var t=e.isDeleteMsgOpen,n=e.handleClose,a=e.handleYes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:t,onClose:n,message:r.a.createElement("span",{id:"message-id"},"Are you sure?"),action:[r.a.createElement($.a,{key:"ok",color:"inherit",size:"small",onClick:a},"ok"),r.a.createElement($.a,{key:"cancel",color:"inherit",size:"small",onClick:n},"cancel")]}))}),ee=function(){return r.a.createElement("header",{className:"nav-bar"},r.a.createElement("div",{className:"container flex"},r.a.createElement("span",{className:"capitalize white-text"},"Herolo Cinema")))},te=function(e){var t=e.label,n=e.items,a=e.item;return r.a.createElement("div",{className:"detail-line"},r.a.createElement("span",{className:"bold"},t),a&&r.a.createElement("span",null," "+a),n&&r.a.createElement("span",null,n.map(function(e,t){return t===n.length-1?" "+e:" "+e+","})))};var ne=Object(d.b)(null,function(e){return{onDeleteMovieClick:function(t){e(Y()),e(q(t))},onEditClick:function(t){e(R(t))}}})(function(e){var t=e.movie,n=e.borderless,a=e.onEditClick,i=e.onDeleteMovieClick,o=[{label:"year released:",item:t.year,items:""},{label:"genre:",item:"",items:t.genres},{label:"runtime:",item:t.runtime+"min",items:""},{label:"director:",item:t.director,items:""}];return r.a.createElement("div",{className:"movie-preview inner-container capitalize"+(n?" borderless":"")},r.a.createElement("a",{name:t.title,className:"anchor hidden",href:"#as"},"anchor"),r.a.createElement("h4",{name:t.title},t.title),r.a.createElement("img",{src:"https://via.placeholder.com/300x200/".concat(E.makeColor(),"/FFFFFF/?text=placeholder"),alt:"movie",className:"mx-auto d-block"}),r.a.createElement("div",{className:"details-wrapper"},o.map(function(e,t){return r.a.createElement(te,{label:e.label,item:e.item,items:e.items,key:t})})),r.a.createElement("div",{className:"button-wrapper flex justify-end mt-20"},r.a.createElement($.a,{onClick:a.bind({},t.id)},"edit\xa0",r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement($.a,{onClick:i.bind({},t.id)},"delete\xa0",r.a.createElement("i",{className:"fas fa-trash"}))))}),ae=n(117),re=n.n(ae),ie=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"scrollUp",value:function(){window.scrollTo({top:0,behavior:"smooth"})}},{key:"render",value:function(){var e=this,t=this.props.movies;return r.a.createElement("div",{className:"movie-list"},t.map(function(n,a){return r.a.createElement(r.a.Fragment,{key:n.id},2===a&&r.a.createElement("div",{className:"position-sticky"},r.a.createElement(re.a,{onClick:e.scrollUp,color:"primary"},r.a.createElement("i",{className:"fas fa-angle-double-up"}))),r.a.createElement(ne,{movie:n,borderless:a===t.length-1}))}))}}]),t}(a.Component),oe=n(118),ce=n.n(oe),se=n(69),le=n.n(se),ue=n(70),me=n.n(ue),de=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.movies,n=e.isTitleListOpen,a=e.closeTitleList;return r.a.createElement(ce.a,{open:n,onClose:a,anchor:"left"},r.a.createElement("h4",{className:"capitalize text-center mt-20"},"jump to movie"),r.a.createElement(le.a,{className:"title-list"},t.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}).map(function(e,t){return r.a.createElement("a",{onClick:a,className:"item",key:t,href:"#"+e.title},r.a.createElement(me.a,{className:"capitalize"},e.title))})))}}]),t}(a.Component);var pe=Object(d.b)(function(e){return{isTitleListOpen:e.isTitleListOpen,movies:e.movies}},function(e){return{closeTitleList:function(){e(J())}}})(de),ve=n(73),fe=n.n(ve),he=n(74),Ee=n.n(he),be=n(119),Oe=n.n(be),ge=n(71),ye=n.n(ge),Me=n(72),ke=n.n(Me),Ce=n(120),je=n.n(Ce),Te=function(e){var t=e.props,n=t.movie,a=t.isWorking,i=t.isClosing,o=t.addMovie,c=t.textFields,s=t.onSubmit,l=t.onClose;return r.a.createElement("div",{className:"movie-edit capitalize animated "+(i?"fadeOut":"fadeIn")},r.a.createElement("div",{className:"modal-screen",onClick:l}),r.a.createElement("form",{onSubmit:s.bind(void 0),className:"animated container "+(i?"fadeOutRight":"fadeInRight")},r.a.createElement("h3",null,o?"Add new movie":"Update movie"),r.a.createElement("div",{className:"wrapper"},c.map(function(e,t){return"select"!==e.type?r.a.createElement(Oe.a,{type:e.type,value:n[e.name],onChange:e.onChange.bind(void 0,e.name),error:e.error,helperText:e.error&&e.label,key:t,placeholder:e.placeholder}):r.a.createElement(ye.a,{key:t,error:e.error},r.a.createElement(fe.a,{value:n[e.name],onChange:e.onChange.bind(void 0,e.name),multiple:!0,inputProps:{name:"genre"}},r.a.createElement(Ee.a,{value:"",disabled:!0},"Genre"),e.genres.map(function(e){return r.a.createElement(Ee.a,{key:e,value:e},e)})),e.error&&r.a.createElement(ke.a,null,"Choose genre."))})),r.a.createElement("div",{className:"buttons-wrapper flex justify-center"},r.a.createElement($.a,{variant:"contained",size:"large",color:"primary",type:"submit"},a?r.a.createElement(je.a,{color:"inherit"}):"save"),r.a.createElement($.a,{variant:"contained",size:"large",type:"button",onClick:l.bind(void 0)},"cancel"))))},we=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this))).handleInputChange=function(e,t){var a=t.target.value;a.length&&!a[0]&&a.shift();var r=Object(h.a)({},n.state.selectedMovie);r[e]=a,n.setState({selectedMovie:r})},n.resetErrors=function(){var e=n.state.textFields;e.forEach(function(e){e.error=!1}),n.setState({textFields:e})},n.state={selectedMovie:e.selectedMovie,isClosing:!1,isWorking:!1,textFields:A.textFields,addMovie:!e.selectedMovie.title},n.state.textFields.forEach(function(e){e.error=!1,e.onChange=n.handleInputChange}),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.selectedMovie,t=this.state,n=t.isWorking,a=t.isClosing,i=t.addMovie,o=t.textFields,c=this.props,s=c.onSubmit,l=c.onClose,u={movie:e,isWorking:n,isClosing:a,addMovie:i,textFields:o,onSubmit:s.bind(this),onClose:l.bind(this)};return r.a.createElement(Te,{props:u})}}]),t}(a.Component);var xe=Object(d.b)(function(e){return{selectedMovie:e.selectedMovie,movies:e.movies}},function(e){return{onSubmit:function(){var t=Object(w.a)(T.a.mark(function t(n){var a=this;return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),this.resetErrors(),A.validate.apply(this)){t.next=10;break}return this.state.addMovie?e(P(this.state.selectedMovie)):e(U(this.state.selectedMovie)),t.next=7,this.setState({isWorking:!0});case 7:return t.next=9,setTimeout(Object(w.a)(T.a.mark(function e(){return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({isClosing:!0});case 2:case"end":return e.stop()}},e,this)})),700);case 9:setTimeout(function(){e(W())},1400);case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),onClose:function(){var t=Object(w.a)(T.a.mark(function t(){return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setState({isClosing:!0});case 2:setTimeout(function(){e(W())},700);case 3:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}})(we),Ie=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onAddMovieClick,n=e.selectedMovie,a=e.movies,i=e.openTitleList;return r.a.createElement("div",{className:"movies-page"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:n.id?"top-wrapper":"top-wrapper sticky"},r.a.createElement("h4",{onClick:i,className:"capitalize pointer"},r.a.createElement("i",{className:"fas fa-list-ul"}),"\xa0 your movie library"),r.a.createElement($.a,{color:"primary",variant:"outlined",onClick:t},r.a.createElement("i",{className:"fas fa-plus"}),"\xa0Add Movie")),r.a.createElement(pe,{store:C}),r.a.createElement(ie,{movies:a}),n.id&&r.a.createElement(xe,{store:C})))}}]),t}(a.Component);var Le=Object(d.b)(function(e){return{selectedMovie:e.selectedMovie,movies:e.movies}},function(e){return{onAddMovieClick:function(){e(R(null))},openTitleList:function(){e(K())}}})(Ie),Ne=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"container flex"},r.a.createElement("small",null,"Built By Noam Kleiner")))},De=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.onLoad()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Q,null),r.a.createElement(ee,{store:C}),r.a.createElement(Le,{store:C}),r.a.createElement(Ne,null))}}]),t}(a.Component);var Se=Object(d.b)(function(e){return{movies:e.movies,isDeleteMsgOpen:e.isDeleteMsgOpen}},function(e){return{onLoad:function(){e(z())}}})(De);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(d.a,{store:C},r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,2,1]]]);
//# sourceMappingURL=main.2f5553b3.chunk.js.map